<!Doctype html>
<html>
  <head>
    <link rel="stylesheet" href="stylesheets/sig.css">
	<link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.css">
	<!--<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">-->
  </head>
  <body>

	<div class="rc-group" align="center">
	  
		<div class="rc" id="root">
		  <a href="##"><i class="fa fa-toggle-off fa-fw support" onclick="closedanmu(this);" style="font-size:1.3em;"></i></a>
		  <input class="input" name="evaluate"/>
		  <a href="##"><i class="fa fa-heart-o fa-fw support" style="font-size:1.3em;"></i></a>
		  <a href="javascript:addli(document.getElementsByName('evaluate')[0].value);"><i class="fa fa-send fa-fw send" style="font-size:1.3em;" ></i></a>
		</div>
      
	</div>
	<script>
	function closedanmu(thi)
	{
		if(thi.getAttribute("class")=="fa fa-toggle-off fa-fw support")
		{	
			thi.className="fa fa-toggle-on fa-fw support"
			window.clearInterval(inte);
			for(var i=0;i<li.length; i++)
			{
				li[i].style.visibility="hidden";
			}
		}
		else
		{
			thi.className="fa fa-toggle-off fa-fw support";
			inte = self.setInterval("danmu()",41);
			for(var i=0;i<li.length; i++)
			{
				li[i].style.visibility="visible";
			}
		}
	}
	</script>
	<ul style="overflow:hidden;position:fixed;z-index:0;" id="danmu">
	  <iframe id="myiframe" src="http://mp.weixin.qq.com/s/qtxbqwHsmvadOcqOGzB1dA" width="100%" style="position:fixed; left:0px; top:0px;">
	</iframe>
      <li style="position:absolute;">ist icons</li>
      <li style="position:absolute;">can be used</li>
      <li style="position:absolute;">hjkhkhjkh</li>
      <li style="position:absolute;">jkhjkjk</li>
    </ul>
	<script>
	  w=document.body.clientWidth;
	  h=window.innerHeight;
	  //调整输入框宽度
	  document.getElementsByClassName("input")[0].style.width=0.7*w+"px";
	  //调整框架高度
	  document.getElementById("myiframe").style.height=h+"px";
	  //获取框架内容高度
	  //alert(document.getElementById("myiframe").contentWindow.document.body.clientHeight);
	  
	</script>
    <script>
		ul=document.getElementById("danmu");
		ul.style.width=w+"px";
		ul.style.height=h+"px";
		li=document.getElementsByTagName('li');
		t=0;
		bft=-1;
		tr=0;
		left=li[0].offsetParent.offsetLeft;
		inte = self.setInterval("danmu()",41);
		w=w+50;
		function danmu()
		{
			if(tr==li.length)
				window.clearInterval(inte);
			t++;
			if(parseInt(t/50)>bft)
			{
				if((parseInt(t/50)+1)* 6 <li.length)
					min=parseInt(t/50)+1;
				else
					min=li.length;
				for(var i = parseInt(t/50)* 6; i<min; i++)
				{
					li[i].style.left=(w+100*i)+"px";
					li[i].style.top=(Math.ceil((Math.random()*10000*h/6))/10000)+"px";
					var speed=Math.random();
					if(speed<0.33)
						speed=1;
					else if(speed<0.66)
						speed=2;
					else 
						speed=3;
					li[i].speed=speed ;
					li[i].style.visibility="visible";
				}
				bft=parseInt(t/50)
			}
			for(var i=0; i<li.length; i++)
			{
				if((li[i].offsetLeft+left)<0)
				{
					if(!li[i].r)
					{
						li[i].style.left=-70+"px";
						li[i].style.visibility="hidden";
						li[i].r=true;
						tr++;
					}
				}else{
					li[i].style.left=(li[i].offsetLeft-li[i].speed)+"px";
				}
			}
		}
		function addli(str){
			//window.clearInterval(inte);
			var newNode = document.createElement("li");
			newNode.setAttribute("style","position:absolute;");
			newNode.innerHTML= str; 
			li[li.length-1].after(newNode);
			li[li.length-1].style.left=(w+ 10)+"px";
			li[li.length-1].style.top=(Math.ceil((Math.random()*10000*h/6))/10000)+"px";
			li[li.length-1].speed= 3;
			li[li.length-1].style.visibility="visible";
			inte = self.setInterval("danmu()",50);
		}
    </script>	


  </body>
</html>